## 营业点管理

优惠券表：

```sql
CREATE TABLE lntd_sv_coupon_info (
	coupon_id BIGINT PRIMARY KEY NOT NULL COMMENT "主键id",
    coupon_name varchar(20) NOT NULL COMMENT "名称",
    coupon_type tinyint NOT NULL COMMENT "优惠券类型 1：代金券2：折扣券3：权益券",
    merchant_id bigint NOT NULL COMMENT "商户id",
    useful_period tinyint NOT NULL COMMENT "优惠券有效期，来自字典",
    coupon_prd_status tinyint NOT NULL DEFAULT 1 COMMENT "券产品状态，见字典 coupon_prd_status",
    sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
    biz_type varchar(50) NOT NULL COMMENT "可用业务范围",
    zone_ids varchar(300) NOT NULL COMMENT "券发行可用的场区列表",
    up_limit tinyint NOT NULL COMMENT "此类券的单次使用上限",
    own_limit bit NOT NULL DEFAULT b'0' COMMENT "是否限制本人使用",
    holiday_limit bit NOT NULL DEFAULT b'0' COMMENT "是否限制节假日",
    mix_limit bit NOT NULL DEFAULT b'1' COMMENT "是否可以叠加",
    group_id bigint NOT NULL  COMMENT "所属机构",
    
    -- 代金券信息
    coupon_amount double COMMENT "代金券金额(代金券必要字段)",
    -- 折扣券信息
    coupon_discount double COMMENT "折扣券折扣率(折扣券必要字段)",
    
    tenant_id BIGINT 	NOT NULL COMMENT "租户id",
	deleted BIT NOT NULL DEFAULT b'0' COMMENT "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT NOT NULL COMMENT "创建者",
	create_time DATETIME NOT NULL COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="优惠券产品信息表";
```

优惠券发行信息表：

```sql
CREATE TABLE lntd_sv_coupon_deploy(
	coupon_deploy_id BIGINT PRIMARY KEY NOT NULL COMMENT "主键id（发行编号）",
    begin_time datetime NOT NULL COMMENT "开始发放优惠券的时间",
    end_time datetime NOT NULL COMMENT "结束发放优惠券的时间",
    coupon_prd_status tinyint NOT NULL DEFAULT 1 COMMENT "发行状态(卡产品状态)，见同名字典",
    words varchar(20) COMMENT "宣发口号",
    image varchar(300) COMMENT "宣发背景图",
    description varchar(500) COMMENT "宣发文案，来自系统参数coupn_description",
    number int NOT NULL COMMENT "发行数量",
    
    coupon_id BIGINT NOT NULL COMMENT "发行的优惠券的id",
    number_by_member_type varchar(200) COMMENT "不同会员对该优惠券的领用权利",
    number_by_time int COMMENT "单次领用数量",
    can_get_when_not_empty bit NOT NULL DEFAULT b'1' COMMENT "有库存时是否可领",
    
    tenant_id BIGINT 	NOT NULL COMMENT "租户id",
	deleted BIT NOT NULL DEFAULT b'0' COMMENT "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT NOT NULL COMMENT "创建者",
	create_time DATETIME NOT NULL COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间"   
)COMMENT="优惠券发行信息表";
```

优惠券商品表：

```sql
CREATE TABLE lntd_sv_coupon_product_info(
	id BIGINT PRIMARY KEY NOT NULL COMMENT "主键id",
    coupon_deploy_id bigint NOT NULL COMMENT "优惠券发行信息id",
    end_date datetime NOT NULL COMMENT "优惠券可用截止日期",
    member_id bigint NOT NULL COMMENT "券持有者的id",
    instance_status tinyint NOT NULL DEFAULT 1 COMMENT "优惠券商品状态 1可用 2已使用 3过期",
    
    
    coupon_id bigint NOT NULL COMMENT "优惠券id",
    coupon_name varchar(20) NOT NULL COMMENT "名称",
    coupon_type tinyint NOT NULL COMMENT "优惠券类型 1：代金券2：折扣券3：权益券",
    merchant_id bigint NOT NULL COMMENT "商户id",
    useful_period tinyint NOT NULL COMMENT "优惠券有效期，来自字典",
    sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
    biz_type varchar(50) NOT NULL COMMENT "可用业务范围",
    zone_ids varchar(300) NOT NULL COMMENT "券发行可用的场区列表",
    up_limit tinyint NOT NULL COMMENT "此类券的单次使用上限",
    own_limit bit NOT NULL DEFAULT b'0' COMMENT "是否限制本人使用",
    holiday_limit bit NOT NULL DEFAULT b'0' COMMENT "是否限制节假日",
    mix_limit bit NOT NULL DEFAULT b'1' COMMENT "是否可以叠加",
    group_id bigint NOT NULL  COMMENT "所属机构",
    -- 代金券信息
    coupon_amount double COMMENT "代金券金额(代金券必要字段)",
    -- 折扣券信息
    coupon_discount double COMMENT "折扣券折扣率(折扣券必要字段)",
    
    tenant_id BIGINT 	NOT NULL COMMENT "租户id",
	deleted BIT NOT NULL DEFAULT b'0' COMMENT "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT NOT NULL COMMENT "创建者",
	create_time DATETIME NOT NULL COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间"  
)COMMENT="优惠券商品信息表";
```









核销表：

```sql
CREATE TABLE lntd_sv_writeoff_info (
	id BIGINT PRIMARY KEY NOT NULL COMMENT "主键id",
  	equity_id BIGINT NOT NULL COMMENT "对应的权益编号",
  	equity_value1 INT COMMENT "核销前的权益值",
  	equity_value2 INT NOT NULL COMMENT "核销后的权益值",
  	equity_delta  INT NOT NULL COMMENT "核销使用的权益值：前-后",
  	writeoff_time DATETIME NOT NULL COMMENT "核销时间",
  	writeoff_type TINYINT NOT NULL COMMENT "核销对象类型",
  	writeoff_user BIGINT NOT NULL COMMENT "核销者
对于订场和非共享卡：核销人即订场者本人
对于共享卡：可能是持卡者本人，也可能是共享给的人",

    
  	tenant_id BIGINT 	NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT NOT NULL COMMENT "创建者",
	create_time DATETIME NOT NULL COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT='核销信息表';
```





```json
{
    "release_port":"3",
    "timed_release_time":{"grand":"17:31","mobile":"17:32"},
    "release_timing":"1",
    "name":"篮球1",
    "release_content":{
            "grand": {
                "field_level":"1",
                "period":"1"
            },
        	"mobile":{
                "field_level":"2",
                "period":"4"
            }
    }    
}
```



**商户表**

```sql
CREATE TABLE lntd_sv_merchant (
	id BIGINT PRIMARY KEY NOT NULL COMMENT "商户id",
	name varchar(100) NOT NULL comment "商户名称",
	business varchar(255) COMMENT "主营业务",
	sport_type varchar(255) comment "运动类型列表，逗号分割",
	status TINYINT comment "商户状态：1-正常，2-暂停合作",
	description text COMMENT "商户简介",
    year INT COMMENT "创办年份",
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="商户表";

```



**卡定义表**

```SQL
CREATE TABLE lntd_sv_term_card_info (
	id BIGINT PRIMARY KEY NOT NULL COMMENT "卡id",
	card_name VARCHAR(20) NOT NULL COMMENT "卡名称",
	card_image VARCHAR(100) COMMENT "背景图",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	useful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	venue_id BIGINT NOT NULL COMMENT "所属场馆",
	group_id BIGINT NOT NULL COMMENT "所属机构",
	introduction text COMMENT "会员卡简介",
	purchase_agreement text COMMENT "购卡协议",
	
    -- 期限卡必要字段
	card_kind TINYINT COMMENT "期限卡种:1-年卡,2-季卡,3-月卡,4-周卡",
	can_purchase TINYINT COMMENT "是否可用作代金凭证:0-否,1-是",
	policy_content text COMMENT "兑换规则内容,json存储来表述规则",
    -- 次卡必要字段
    card_num INT COMMENT "卡次数",
	can_purchase TINYINT COMMENT "是否可用作代金凭证",
	policy_content text COMMENT "兑换规则内容,json存储来表述规则",
    -- 储值卡必要字段
    mount DECIMAL(10,2)  COMMENT "卡面额",
	amount_limit DECIMAL(10,2)  COMMIT "单次储值下限",
	biz_type TINYINT COMMENT "可用业务类型，参看字典表说明",
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="卡产品定义表";

```

```sql
CREATE TABLE lntd_sv_num_card_info (
	id BIGINT PRIMARY KEY NOT NULL COMMENT "卡id",
	card_name VARCHAR(20) NOT NULL COMMENT "卡名称",
	card_image VARCHAR(100) COMMENT "背景图",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	useful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	venue_id BIGINT NOT NULL COMMENT "所属场馆",
	group_id BIGINT NOT NULL COMMENT "所属机构",
	introduction text COMMENT "会员卡简介",
	purchase_agreement text COMMENT "购卡协议",
	
	card_num INT NOT NULL COMMENT "卡次数",
	can_purchase TINYINT NOT NULL COMMENT "是否可用作代金凭证",
	policy_content text NOT NULL COMMENT "兑换规则内容,json存储来表述规则",
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="次卡产品定义表";
```



```sql
CREATE TABLE lntd_sv_value_card_info (
	id BIGINT PRIMARY KEY NOT NULL COMMENT "卡id",
	card_name VARCHAR(20) NOT NULL COMMENT "卡名称",
	card_image VARCHAR(100) COMMENT "背景图",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	useful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	venue_id BIGINT NOT NULL COMMENT "所属场馆",
	group_id BIGINT NOT NULL COMMENT "所属机构",
	introduction text COMMENT "会员卡简介",
	purchase_agreement text COMMENT "购卡协议",
		
	mount DECIMAL(10,2) NOT NULL COMMENT "卡面额",
	amount_limit DECIMAL(10,2) NOT NULL COMMIT "单次储值下限",
	biz_type TINYINT NOT NULL COMMENT "可用业务类型，参看字典表说明",
	
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="储值卡产品定义表";
```



**卡商品表**

```sql
CREATE TABLE lntd_sv_term_card_product_info (
	id BIGINT NOT NULL COMMENT "卡商品id",
	custom_id BIGINT NOT NULL COMMENT "购买者(会员/散客)id",
	card_id BIGINT NOT NULL COMMENT "卡产品id",
	card_name varchar(20) NOT NULL COMMENT "卡名称",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	userful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	
	deploy_port TINYINT NOT NULL COMMENT "发布端口:1-微信端,2-地面端",
	sale_target_role varchar(6) NOT NULL COMMENT "卡可以销售的会员对象
左起第一位为散客，0表示不可售，1表示可售，往右分别是1-5级会员，自高到低
010000，表示一级会员可售
100000，表示散客可售",
	sale_target_age varchar(30) NOT NULL COMMENT "销售对象年龄，查看字典项",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	period_list varchar(200) NOT NULL COMMENT "可通行时间区间组，json表示",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	card_begin_status TINYINT COMMENT "开卡状态:0-未开卡,1-已开卡",
	card_begin_time DATETIME COMMENT "开卡时间",
	venue_id BIGINT NOT NULL COMMENT "所属场馆id",
	group_id BIGINT NOT NULL COMMENT "所属机构id",
	can_share BIT NOT NULL COMMENT "可否共享卡",
	share_limit INT NOT NULL DEFAULT 0 COMMENT "共享人数上限：缺省为0，表示无上限。最大数10",
	share_ids varchar(200) COMMENT "共享人id列表",
	can_change BIT NOT NULL COMMENT "是否可转卡",
	change_algorithm TINYINT NOT NULL COMMENT "转卡金额建议算法，参看字典表",
	if_limit_fren BIT NOT NULL COMMENT "是否限制划卡频度",
	period_fren TINYINT COMMENT "频度核算单位时间，参看字典表",
	period_times TINYINT COMMENT "频度核算次数,在核算时长内的发生次数限制",
	can_password BIT NOT NULL COMMENT "是否开启核销密码",
	writeoff_password varchar(100) COMMENT "核销密码",
	account_type TINYINT NOT NULL COMMENT "记账方式：0-收付实现制,1-权责发生制",
	
    -- 期限卡必要字段
    card_kind TINYINT COMMENT "期限卡种:1-年卡,2-季卡,3-月卡,4-周卡",
	can_purchase TINYINT COMMENT "是否可用作代金凭证:0-否,1-是",
	policy_content text COMMENT "兑换规则内容,json存储来表述规则",
    -- 次卡必要字段
    card_num INT COMMENT "卡次数",
	can_purchase TINYINT COMMENT "是否可用作代金凭证",
	policy_content text COMMENT "兑换规则内容,json存储来表述规则",
    -- 储值卡必要字段
    mount DECIMAL(10,2) COMMENT "卡面额",
	amount_limit DECIMAL(10,2) COMMIT "单次储值下限",
	biz_type TINYINT COMMENT "可用业务类型，参看字典表说明",
    
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="卡商品信息表";
```



```sql
CREATE TABLE lntd_sv_num_card_product_info (
	id BIGINT NOT NULL COMMENT "卡商品id",
	custom_id BIGINT NOT NULL COMMENT "购买者(会员/散客)id",
	card_id BIGINT NOT NULL COMMENT "卡产品id",
	card_name varchar(20) NOT NULL COMMENT "卡名称",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	userful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	
	deploy_port TINYINT NOT NULL COMMENT "发布端口:1-微信端,2-地面端",
	sale_target_role varchar(6) NOT NULL COMMENT "卡可以销售的会员对象
左起第一位为散客，0表示不可售，1表示可售，往右分别是1-5级会员，自高到低
010000，表示一级会员可售
100000，表示散客可售",
	sale_target_age varchar(30) NOT NULL COMMENT "销售对象年龄，查看字典项",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	period_list varchar(200) NOT NULL COMMENT "可通行时间区间组，json表示",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	card_begin_status TINYINT COMMENT "开卡状态:0-未开卡,1-已开卡",
	card_begin_time DATETIME COMMENT "开卡时间",
	venue_id BIGINT NOT NULL COMMENT "所属场馆id",
	group_id BIGINT NOT NULL COMMENT "所属机构id",
	can_share BIT NOT NULL COMMENT "可否共享卡",
	share_limit INT NOT NULL DEFAULT 0 COMMENT "共享人数上限：缺省为0，表示无上限。最大数10",
	share_ids varchar(200) COMMENT "共享人id列表",
	can_change BIT NOT NULL COMMENT "是否可转卡",
	change_algorithm TINYINT NOT NULL COMMENT "转卡金额建议算法，参看字典表",
	if_limit_fren BIT NOT NULL COMMENT "是否限制划卡频度",
	period_fren TINYINT COMMENT "频度核算单位时间，参看字典表",
	period_times TINYINT COMMENT "频度核算次数,在核算时长内的发生次数限制",
	can_password BIT NOT NULL COMMENT "是否开启核销密码",
	writeoff_password varchar(100) COMMENT "核销密码",
	account_type TINYINT NOT NULL COMMENT "记账方式：0-收付实现制,1-权责发生制",
    
    card_num INT NOT NULL COMMENT "卡次数",
	can_purchase TINYINT NOT NULL COMMENT "是否可用作代金凭证",
	policy_content text NOT NULL COMMENT "兑换规则内容,json存储来表述规则",
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="次卡商品信息表";
```



```sql
CREATE TABLE lntd_sv_value_card_product_info (
	id BIGINT NOT NULL COMMENT "卡商品id",
	custom_id BIGINT NOT NULL COMMENT "购买者(会员/散客)id",
	card_id BIGINT NOT NULL COMMENT "卡产品id",
	card_name varchar(20) NOT NULL COMMENT "卡名称",
	card_type TINYINT NOT NULL COMMENT "卡类型:1-期限卡，2-次卡，3-储值卡",
	biz_id BIGINT NOT NULL COMMENT "商户编号",
	userful_period TINYINT NOT NULL COMMENT "卡有效期(月)",
	card_price DECIMAL(10,2) NOT NULL COMMENT "售价",
	sport_type varchar(200) NOT NULL COMMENT "运动类型列表",
	
	deploy_port TINYINT NOT NULL COMMENT "发布端口:1-微信端,2-地面端",
	sale_target_role varchar(6) NOT NULL COMMENT "卡可以销售的会员对象
左起第一位为散客，0表示不可售，1表示可售，往右分别是1-5级会员，自高到低
010000，表示一级会员可售
100000，表示散客可售",
	sale_target_age varchar(30) NOT NULL COMMENT "销售对象年龄，查看字典项",
	zone_ids varchar(200) NOT NULL COMMENT "可通行场区的id列表",
	period_list varchar(200) NOT NULL COMMENT "可通行时间区间组，json表示",
	card_begin_type TINYINT NOT NULL COMMENT "开卡方式:1-购买即开卡，2-手动前台开卡",
	card_begin_status TINYINT COMMENT "开卡状态:0-未开卡,1-已开卡",
	card_begin_time DATETIME COMMENT "开卡时间",
	venue_id BIGINT NOT NULL COMMENT "所属场馆id",
	group_id BIGINT NOT NULL COMMENT "所属机构id",
	can_share BIT NOT NULL COMMENT "可否共享卡",
	share_limit INT NOT NULL DEFAULT 0 COMMENT "共享人数上限：缺省为0，表示无上限。最大数10",
	share_ids varchar(200) COMMENT "共享人id列表",
	can_change BIT NOT NULL COMMENT "是否可转卡",
	change_algorithm TINYINT NOT NULL COMMENT "转卡金额建议算法，参看字典表",
	if_limit_fren BIT NOT NULL COMMENT "是否限制划卡频度",
	period_fren TINYINT COMMENT "频度核算单位时间，参看字典表",
	period_times TINYINT COMMENT "频度核算次数,在核算时长内的发生次数限制",
	can_password BIT NOT NULL COMMENT "是否开启核销密码",
	writeoff_password varchar(100) COMMENT "核销密码",
	account_type TINYINT NOT NULL COMMENT "记账方式：0-收付实现制,1-权责发生制",
    
    mount DECIMAL(10,2) NOT NULL COMMENT "卡面额",
	amount_limit DECIMAL(10,2) NOT NULL COMMIT "单次储值下限",
	biz_type TINYINT NOT NULL COMMENT "可用业务类型，参看字典表说明",
	
	tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="储值卡商品信息表";
```



**卡规则设置表**

```sql
CREATE TABLE lntd_sv_card_rule_setting (
	id BIGINT NOT NULL COMMENT "id",
	card_id BIGINT NOT NULL COMMENT "卡产品id",
    
    policy_card_deploy_id BIGINT NOT NULL COMMENT "卡发布规则id",
    policy_card_purchase_id BIGINT NOT NULL COMMENT "卡购买规则id",
    policy_card_use_id BIGINT NOT NULL COMMENT "卡使用规则id",
    policy_card_account_id BIGINT NOT NULL COMMENT "记账分账规则id",
    
    tenant_id BIGINT NOT NULL COMMENT "租户id",
	deleted BIT COMMENT NOT NULL DEFAULT b'0' "删除标志，0-未删除，1-删除，默认为0",
	creator BIGINT COMMENT "创建者",
	create_time DATETIME COMMENT "创建时间",
	updater BIGINT COMMENT "更新者",
	update_time DATETIME COMMENT "更新时间" 
)COMMENT="卡规则设置表";
```







测试时的权限设置

## 用户端登录

### 微信登录流程：

[官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)



![api-login.2fcc9f35](https://raw.githubusercontent.com/timothy020/pic/main/img/api-login.2fcc9f35.jpg)



### 配置与准备

![image-20240121100108646](https://raw.githubusercontent.com/timothy020/pic/main/img/image-20240121100108646.png)

![image-20240121095956382](https://raw.githubusercontent.com/timothy020/pic/main/img/image-20240121095956382.png)

